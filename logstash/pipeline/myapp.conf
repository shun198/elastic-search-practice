# myapp.conf — テスト / サンプル用パイプライン
# 注意: この設定はローカルでのテスト目的で TCP input(5055) を使用します。
# 本番環境では Beats / File inputs など適切な input を使ってください。

input {
  tcp {
    port => 5055
    codec => plain { charset => "UTF-8" }
  }
}

filter {
  grok {
    match => { "message" => "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} %{GREEDYDATA:message}" }
  }

  date {
    match => [ "timestamp", "ISO8601" ]
    target => "@timestamp"
  }

  mutate {
    remove_field => [ "timestamp" ]
  }
}

output {
  # 開発時に確認しやすいよう stdout に出します
  stdout { codec => rubydebug }
}
